<html>
<head>
    <title>Interactive Polynomial Curve Regression</title>
</head>

<div id="canvasBorder">
    <canvas id="canvas" mousemove="drawCrosshair" mouseout=""></canvas>
</div>
<!-- <div id="resizeW"></div> -->

<div id="pointlist">
    <div class="seriesBlock">
        <div class="row">
            <input type="checkbox" name="showZoom" id="showZoom" checked="true"><label for="showZoom">Show Magnifier</label>
        </div>
        <div class="row">
            <!-- <div class="label">Datum: </div> -->
            <!-- <div class="value" id="datum0">Not set</div> -->

            <div><button id="showHideCalib">Show/hide Calibration</button></div>
        </div>
        <div class="row">
            <div class="button"><button id="markPoints0">Mark Curve Points</button></div>
            <div class="button"><button id="clearPoints">Clear Markers</button></div>
        </div>
        <div id="series0" class="seriesList"></div>
    </div>
</div>
<div id="calibrate">
    <div>
        <div id="calibStatus" class="calibHeader set">Chart calibrated</div>
        <div id="point1status" class="calibHeader set">Point 1:</div>
        <div id="calibPoint1" class="value">Uses Datum</div>
        <div class="button" id="setDatum0div"><button id="setDatum0btn">Set Datum</button></div>
        <div id="point2entry">
            <!-- <div>Pixel Location: <div class="label" id="point1pixel">N/A</div> -->

            <div>Measured:</div>
            X-Value: <input type="text" name="" id="calib1valueX" value="0">
            Y-Value: <input type="text" name="" id="calib1valueY" value="0">
            <button id="setCalib1">Set Point</button>
        </div>
    </div>
    <div>
        <div id="point2status" class="calibHeader set">Point 2:</div>
        <div id="calibPoint2" class="value">Not set</div>
        <div class="button"><button id="selectPoint2">Select Point</button></div>
        <div id="point2entry">
            <!-- <div>Pixel Location: <div class="label" id="point2pixel">N/A</div></div> -->
            <div>Measured:</div>
            X-Value: <input type="text" name="" id="calib2valueX" class="" value="">
            Y-Value: <input type="text" name="" id="calib2valueY" class="" value="">
            <button id="setCalib2">Set Point</button>
        </div>
    </div>
    <div style="display: none;">
        <div class="calibHeader">
            Results
        </div>
        <div>
            dX = <span id="calibdx">Not set</span>
        </div>
        <div>
            dY = <span id="calibdy">Not set</span>
        </div>

    </div>

</div>

<div id="regressionBox">
    <div>Polynomial Regression</div>
    <label for="showRegression"><input type="checkbox" name="showRegression" checked="true" id="showRegression">PLOT</label>
    <div>Degree: <span id="polyDegreeValue">3</span> <button id="increasePoly">+</button> / <button id="decreasePoly">-</button></div>
    <div id="deg3poly"></div>
    <div><a href="#" id="plotRegression">Plot regression</a></div>
    <div>Prediction Value @ X=<input id="predictInput" value="4"></div>
    <div id="regressionPredictY"></div>

</div>
<div id="notes">
    <pre>
    TIPS:
    * Single clicks in the chart only.
    * Use the arrows and "enter" to move by pixel when calibrating the chart or settings points
    * Use +/- keys to change the zoom factor of the marking window
    * Click anywhere on the page (to set the focus) and press Ctrl+V to paste your clipboard image into the graph


    How to use this tool:
    <span>1. Load your graph</span>
    <span>2. Set the datum</span>
    <span>3. Set a known calibration point</span>
    <span>4. Select "mark points" and calibrate the chart against some points from your curve.</span>
    <span>5. Adjust regression degree until it works for you</span>
    </pre>

</div>
Select Graph File: <input type="file" id="filebrowsed">
<!-- <div><button id="addSeries">Add series</button></div> -->

<!-- <div><button>Export as CSV</button></div> -->

<script src="graphcanvas.js"></script>
<script src="PolynomialRegression.js"></script>
<script>
    window.poly = window.default;
</script>
<link rel="stylesheet" href='graphcanvas.css' ></link>

<pre>
    What's new:
    2021-04-06
    [+] Added Ctrl+V to paste
    [!] Fixed datum at non 0,0 coordinate corrected
</pre>

Latest version available at <a href="https://www.github.com/devinjames/graphregression">github.com/devinjames/graphregression</a>

</html>
